<!DOCTYPE html>
<html>
<head>
    <title>Auto Play MIDI Background</title>
    <script src="https://cdn.jsdelivr.net/npm/jzz"></script>
    <script src="https://cdn.jsdelivr.net/npm/jzz-midi-smf"></script>
    <script src="https://cdn.jsdelivr.net/npm/jzz-synth-tiny"></script>
</head>

<body>
<script>
    JZZ.synth.Tiny.register('Web Audio');
    var out = JZZ().openMidiOut();
    var player;

    function loadMIDI() {
        fetch('background.mid')
            .then(response => response.arrayBuffer())
            .then(data => {
                var midiData = '';
                var bytes = new Uint8Array(data);
                for (var i = 0; i < bytes.length; i++) {
                    midiData += String.fromCharCode(bytes[i]);
                }
                playMIDI(midiData);
            })
            .catch(error => console.error('Error loading MIDI file:', error));
    }

    function playMIDI(data) {
        try {
            player = JZZ.MIDI.SMF(data).player();
            player.connect(out);
            player.loop();  // Set the music to loop
            player.play();
        } catch (e) {
            console.error('Error playing MIDI:', e);
        }
    }

    document.body.onclick = function() {
        loadMIDI();  // Play music on first click
    };
</script>

<p>Click anywhere on the page to start the background music.</p>

</body>
</html>